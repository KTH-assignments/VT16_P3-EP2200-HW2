\begin{figure}[H]
	\centering
	\scalebox{0.8}{\input{./figures/4.1.tex}}
	\caption{The block diagram of the queue. There are infinite places in the
    queue and only one server.}
\end{figure}

\begin{figure}[H]
	\centering
	\scalebox{1}{\input{./figures/4.2.tex}}
	\caption{The Markovian chain describing the system}
\end{figure}

Considering local balance equations we get

\begin{align*}
  \lambda \pi_0 &= \mu \pi_1 \Leftrightarrow \pi_1 = \dfrac{\lambda}{\mu}\pi_0\\
  \lambda \pi_1 &= \mu \pi_2 \Leftrightarrow \pi_2 = \dfrac{\lambda}{\mu}\pi_1 = \Big(\dfrac{\lambda}{\mu}\Big)^2\pi_0\\
  \lambda \pi_2 &= \mu \pi_3 \Leftrightarrow \pi_3 = \Big(\dfrac{\lambda}{\mu}\Big)^3\pi_0\\
  \cdots
\end{align*}

In other words, in general $$\pi_i = \Big(\dfrac{\lambda}{\mu}\Big)^i\pi_0$$

In order to identify all $\pi_i$ we resort to the general law of
$$\sum_{i=0}^{\infty} \pi_i = 1$$

from where we calculate that
$$\pi_0 = 1 - \dfrac{\lambda}{\mu}$$

and

$$\pi_i = \Big(\dfrac{\lambda}{\mu}\Big)^i(1 - \dfrac{\lambda}{\mu})$$

The values for the intensities $\lambda$ and $\mu$ can be derived from

\begin{align*}
  \lambda &= \dfrac{1}{2 \cdot 10^{-3}} = 500 \\
  \mu     &= \dfrac{1}{10^{-3}} = 1000
\end{align*}

Hence the probability that the system is empty is given by

$$\pi_0 = 1 - \dfrac{\lambda}{\mu} = 0.5$$

and, in general, the probability that there are $i$ packets in the system
(in the queue and in the server) is

$$\pi_i = \Big(\dfrac{\lambda}{\mu}\Big)^i(1 - \dfrac{\lambda}{\mu}) = 0.5^{i+1}$$

The average number of packets waiting for transmission $N$ is the average number
of packets in the queue, hence

$$N = \sum_{i=2}^{\infty} i \cdot \pi_i = \sum_{i=2}^{\infty} i \cdot \Big(\dfrac{\lambda}{\mu}\Big)^i \cdot \pi_0 =
0.5 \sum_{i=2}^{\infty} i \cdot \Big(\dfrac{1}{2}\Big)^i = 0.5 \cdot 1.5 = 0.75$$

Where the starting condition is $i=2$ because waiting for transmission means that
there is at least one packet in the queue, and for that to happen there is
exactly one packet being transmitted in the server.
